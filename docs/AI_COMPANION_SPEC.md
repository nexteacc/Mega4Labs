# 视频 AI 陪读伴侣 - 技术规格说明书

## 概述
“AI 陪读伴侣”是视频播放器的一个语义化导航和总结侧边栏。它通过“问答”交互块将线性的视频消费转化为结构化、可导航的体验。

## 1. 核心概念
-   **隐喻**：“语义时间轴” / “交互式章节卡片”。
-   **价值**：允许用户查看已经讨论过的内容、正在讨论的内容以及即将讨论的内容，提供上下文理解和快速导航能力。

## 2. 技术架构

### 2.1 数据模型
系统依赖于一系列结构化的“交互块”序列。每个交互块包含以下核心信息：
*   **时间戳 (Timestamp)**：该讨论段落的开始时间（秒）。
*   **话题 (Topic)**：宏观的上下文或主题（例如：“AI 安全风险”）。
*   **问题 (Question)**：触发该段落的核心问题，包含提问者和具体问题文本。
*   **回答 (Answer)**：核心内容摘要，包含回答者、回答总结文本，以及可选的关键点列表。

### 2.2 视频联动 (双向同步)
**目标**：实现非线性信息流与线性视频播放之间的无缝同步。

#### A. 视频 -> 信息流 (自动同步)
*   **机制**：使用钩子函数轮询 YouTube 播放器 API（间隔约 500毫秒）。
*   **逻辑**：系统实时计算当前播放时间落在哪个交互块的时间区间内（即：当前块开始时间 <= 当前时间 < 下一块开始时间）。
*   **行为**：当检测到活跃的交互块发生变化时，侧边栏组件会自动平滑滚动，将新的活跃卡片置于中心。

#### B. 信息流 -> 视频 (导航)
*   **交互**：用户点击任意卡片（无论是活跃的还是非活跃的）。
*   **动作**：播放器立即跳转至该卡片对应的时间戳。
*   **视觉反馈**：
    1.  视频画面立即跳转到特定的讨论点。
    2.  被点击的卡片变为“活跃状态”（高亮显示）。

### 2.3 状态管理与生命周期
*   **父组件**：视频播放器对话框 (`VideoPlayerDialog`)。
*   **条件渲染**：
    *   侧边栏仅在当前视频拥有关联的 AI 数据时显示。
    *   如果没有数据，播放器将回退到原有的居中布局。
*   **加载**：
    *   AI 伴侣组件与视频播放器并行加载。
    *   它共享模态框的入场动画，以确整体外观的一致性。

### 2.4 视觉设计与交互
**美学风格**：活跃状态采用“流光溢彩”效果。

*   **活跃卡片 (Active Card)**：
    *   **视觉**：发光的边框或背景渐变脉冲效果。完全不透明度 (1.0)。
    *   **缩放**：轻微的层级提升或放大，以强调焦点。
*   **非活跃卡片 (Inactive Cards)**：
    *   **视觉**：降低不透明度（半透明）。
    *   **悬停**：轻微变亮，提示用户可点击进行跳转。
*   **滚动行为**：
    *   启用平滑滚动。
    *   采用“居中吸附”逻辑，确保当前的叙事焦点始终清晰可见。

## 3. 实施计划步骤
1.  **模拟数据**：创建一个模拟数据文件，为演示视频精心编排约 5 分钟的问答数据。
2.  **类型定义**：在项目中定义相关的数据接口类型。
3.  **组件开发**：构建 `AICompanion` 组件，利用 CSS 实现“流光溢彩”的光效。
4.  **集成**：更新 `VideoPlayerDialog` 组件，使其能根据是否有数据动态切换布局（左视频+右侧栏 vs 单独视频）。
